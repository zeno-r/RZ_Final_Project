<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Data – Democratic backsiliding in Europe: insights from the V-Dem dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./results.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/d3-4.10.2/d3.min.js"></script>
<link href="site_libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
<script src="site_libs/collapsibleTree-binding-0.1.8/collapsibleTree.js"></script>
<style>
p { text-align: justify; }
</style>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Democratic backsiliding in Europe: insights from the V-Dem dataset</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/zeno-r/RZ_Final_Project" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#description" id="toc-description" class="nav-link active" data-scroll-target="#description"><span class="header-section-number">2.1</span> Description</a></li>
  <li><a href="#missing-value-analysis" id="toc-missing-value-analysis" class="nav-link" data-scroll-target="#missing-value-analysis"><span class="header-section-number">2.2</span> Missing value analysis</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/zeno-r/RZ_Final_Project/edit/main/data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/zeno-r/RZ_Final_Project/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The V-Dem dataset is one of the largest social science data collection projects on democracy, based at the University of Gothenburg. V-Dem provides 600+ indicators across all countries from 1789 to the present, measuring five high-level principles of democracy: electoral, liberal, participatory, deliberative, and egalitarian. Each principle is represented by an index and it is further broken down into components, each measured separately. Components (i.e.&nbsp;sub-indexes) include features such as free and fair elections, civil liberties, judicial independence and so on. Finally, each component is disaggregated into specific indicators (i.e.&nbsp;individual measurements or variables) For a quick overview of V-Dem data and methodology, <a href="https://www.v-dem.net/about/v-dem-project/">click here</a>.</p>
<section id="description" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="description"><span class="header-section-number">2.1</span> Description</h2>
<p>The dataset contains five key variable types based on their coding method:</p>
<p><strong>Variable Types in the V-Dem Dataset</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 40%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Type</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
<th style="text-align: left;"><strong>Examples</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>A / A</strong>*</td>
<td style="text-align: left;">Factual data coded by project managers or research assistants from existing sources.</td>
<td style="text-align: left;">% of population with suffrage</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>C</strong></td>
<td style="text-align: left;">Expert-coded variables, assessed by typically 5 or more country specialists (scholars or residents with deep country knowledge; identities kept confidential).</td>
<td style="text-align: left;">Harassment of journalists <em>(Are individual journalists harassed — i.e., threatened with libel, arrested, imprisoned, beaten, or killed — by governmental or powerful nongovernmental actors? Responses in a scale from 0 to 4)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>D</strong></td>
<td style="text-align: left;">Indices or components aggregated from Type A or C variables.</td>
<td style="text-align: left;">Electoral democracy index, political corruption index</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>E</strong></td>
<td style="text-align: left;">Variables imported from external sources.</td>
<td style="text-align: left;">—</td>
</tr>
</tbody>
</table>
<p>The variables take the form of nominal (classifications, text, dates), numerical, ordinal (e.g., Likert-style scales), or interval scales (indexes) <a href="https://www.v-dem.net/documents/56/methodology.pdf">(Methodology)</a>.</p>
<p>Further metadata information: (i) the codebook explains each variable meaning, collection and coding, frequency and scale. Survey questions and answer options are detailed fully alongside the aggregation methodology across country expert [(Codebook)]https://www.v-dem.net/documents/55/codebook.pdf; (ii) the structure of aggregation document, i.e.&nbsp;the taxonomy of indexes, sub-indexes and indicators with codes [(Structure of aggregation)]https://www.v-dem.net/documents/57/structureofaggregation.pdf.</p>
<p>In the context of this work, I will concentrate on both indicators and indexes, to refer to higher level concepts, such as democracy rankings.<br>
This analysis also makes use of macro-economic data from Eurostat, in particular the Gini coefficient for equivalised disposable income and real GDP per capita. Eurostat series presented some missing patterns, which I will adress in the following section.</p>
<p><strong>Structure of the dataset</strong></p>
<p>The V-Dem top five indices measure five high-level principles of democracy: electoral, liberal, participatory, deliberative, and egalitarian. Each index is an aggregation of sub-index components and each sub-index is an aggregation of variables. Most variables derive from an aggregation of expert judgments for features of democracy that are not directly observable (C type of variables, please refer to table above) .</p>
<p>The most central index in the dataset is the <strong>Electoral Democracy index</strong>: it measures to what extent “elections are free, fair, and reoccurring; elected officials wield political power de facto; suffrage is universal; political parties and candidates can form freely and compete; and the environment around elections make for a reasonably level playing field with speech, media, and civil society freedom.” <a href="https://www.v-dem.net/documents/54/v-dem_dr_2025_lowres_v1.pdf">(25 Years of Autocratization – Democracy Trumped?)</a></p>
<p>As highlighted in the methodology document: “we consider this measure fundamental to all other measures of democracy: we would not call a regime without elections “democratic” in any sense”.<a href="https://www.v-dem.net/documents/56/methodology.pdf">(Methodology)</a></p>
<p>Hence, in the remainder of this analysis the Electoral Democracy Index will be used as a proxy for democratic health and democratic backsliding, whilst the other indices will be used sparsely with the purpose of adding further dimensions and color to this central one.</p>
<p><strong>V-Dem Dataset Structure: Indices, Sub-indices and Indicators</strong>. <br>Click on the bubbles to see sub-components</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("collapsibleTree")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(collapsibleTree)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>structure_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/structure_of_aggregation_.csv"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">collapsibleTree</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  structure_data,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">hierarchy =</span> <span class="fu">c</span>(<span class="st">"High Level Index"</span>, <span class="st">"Low Level Index"</span>, <span class="st">"Indicator"</span>),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">1800</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">900</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">fontSize =</span> <span class="dv">10</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">linkLength =</span> <span class="dv">200</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">zoomable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">collapsed =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">root =</span> <span class="st">"V-Dem"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">nodeSize =</span> <span class="st">"leafCount"</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-9f21c8214ca91c596fae" style="width:100%;height:325px;" class="collapsibleTree html-widget"></div>
<script type="application/json" data-for="htmlwidget-9f21c8214ca91c596fae">{"x":{"data":{"name":"V-Dem","SizeOfNode":23.07,"children":[{"name":"Electoral Democracy Index","SizeOfNode":13.26,"children":[{"name":"Freedom of expression and alternative sources of information index","SizeOfNode":6.21,"children":[{"name":"Freedom of academic and cultural expression","SizeOfNode":2.07},{"name":"Freedom of discussion for men","SizeOfNode":2.07},{"name":"Freedom of discussion for women","SizeOfNode":2.07},{"name":"Media bias","SizeOfNode":2.07},{"name":"Government censorship effort - Media","SizeOfNode":2.07},{"name":"Print/broadcast media critical","SizeOfNode":2.07},{"name":"Harassment of journalists","SizeOfNode":2.07},{"name":"Print/broadcast media perspectives","SizeOfNode":2.07},{"name":"Media self-censorship","SizeOfNode":2.07}]},{"name":"Freedom of association index","SizeOfNode":5.07,"children":[{"name":"CSO entry and exit","SizeOfNode":2.07},{"name":"CSO repression","SizeOfNode":2.07},{"name":"Elections multiparty","SizeOfNode":2.07},{"name":"Barriers to parties","SizeOfNode":2.07},{"name":"Opposition parties autonomy","SizeOfNode":2.07},{"name":"Party ban","SizeOfNode":2.07}]},{"name":"Share of population with suffrage","SizeOfNode":2.07,"children":[{"name":"Percent of population with suffrage","SizeOfNode":2.07}]},{"name":"Clean elections index","SizeOfNode":5.86,"children":[{"name":"EMB autonomy","SizeOfNode":2.07},{"name":"EMB capacity","SizeOfNode":2.07},{"name":"Election free and fair","SizeOfNode":2.07},{"name":"Election government intimidation","SizeOfNode":2.07},{"name":"Election other voting irregularities","SizeOfNode":2.07},{"name":"Election other electoral violence","SizeOfNode":2.07},{"name":"Election voter registry","SizeOfNode":2.07},{"name":"Election vote buying","SizeOfNode":2.07}]},{"name":"Elected officials index","SizeOfNode":8.539999999999999,"children":[{"name":"HOG selection by legislature in practice","SizeOfNode":2.07},{"name":"HOS selection by legislature in practice","SizeOfNode":2.07},{"name":"Chief executive appointment by upper chamber","SizeOfNode":2.07},{"name":"Chief executive appointment by upper chamber implicit approval","SizeOfNode":2.07},{"name":"HOS appoints cabinet in practice","SizeOfNode":2.07},{"name":"HOS dismisses ministers in practice","SizeOfNode":2.07},{"name":"HOG dismisses ministers in practice","SizeOfNode":2.07},{"name":"HOG appoints cabinet in practice","SizeOfNode":2.07},{"name":"HOS = HOG?","SizeOfNode":2.07},{"name":"HOS appointment in practice","SizeOfNode":2.07},{"name":"HOG appointment in practice","SizeOfNode":2.07},{"name":"Relative power of the HOS","SizeOfNode":2.07},{"name":"Legislature bicameral","SizeOfNode":2.07},{"name":"Upper chamber elected","SizeOfNode":2.07},{"name":"Lower chamber elected","SizeOfNode":2.07},{"name":"Percentage of indirectly elected legislators lower chamber","SizeOfNode":2.07},{"name":"Percentage of indirectly elected legislators upper chamber","SizeOfNode":2.07}]}]},{"name":"Liberal Democracy Index","SizeOfNode":9.93,"children":[{"name":"Equality before the law and individual liberty index","SizeOfNode":7.75,"children":[{"name":"Access to justice for men","SizeOfNode":2.07},{"name":"Access to justice for women","SizeOfNode":2.07},{"name":"Freedom of foreign movement","SizeOfNode":2.07},{"name":"Freedom from political killings","SizeOfNode":2.07},{"name":"Property rights for men","SizeOfNode":2.07},{"name":"Property rights for women","SizeOfNode":2.07},{"name":"Freedom of religion","SizeOfNode":2.07},{"name":"Freedom from forced labor for men","SizeOfNode":2.07},{"name":"Freedom from forced labor for women","SizeOfNode":2.07},{"name":"Freedom of domestic movement for men","SizeOfNode":2.07},{"name":"Freedom of domestic movement for women","SizeOfNode":2.07},{"name":"Rigorous and impartial public administration","SizeOfNode":2.07},{"name":"Freedom from torture","SizeOfNode":2.07},{"name":"Transparent laws with predictable enforcement","SizeOfNode":2.07}]},{"name":"Judicial constraints on the executive index","SizeOfNode":4.63,"children":[{"name":"Executive respects constitution","SizeOfNode":2.07},{"name":"Compliance with judiciary","SizeOfNode":2.07},{"name":"Compliance with high court","SizeOfNode":2.07},{"name":"High court independence","SizeOfNode":2.07},{"name":"Lower court independence","SizeOfNode":2.07}]},{"name":"Legislative constraints on the executive index","SizeOfNode":4.14,"children":[{"name":"Legislature investigates in practice","SizeOfNode":2.07},{"name":"Legislature opposition parties","SizeOfNode":2.07},{"name":"Executive oversight","SizeOfNode":2.07},{"name":"Legislature questions officials in practice","SizeOfNode":2.07}]}]},{"name":"Participatory Democracy Index","SizeOfNode":13.58,"children":[{"name":"Civil society participation index","SizeOfNode":4.14,"children":[{"name":"CSO consultation","SizeOfNode":2.07},{"name":"CSO womens participation","SizeOfNode":2.07},{"name":"CSO participatory environment","SizeOfNode":2.07},{"name":"Candidate selection National/local","SizeOfNode":2.07}]},{"name":"Direct popular vote index","SizeOfNode":11.9,"children":[{"name":"Initiatives administrative threshold","SizeOfNode":2.07},{"name":"Referendums administrative threshold","SizeOfNode":2.07},{"name":"Initiatives approval threshold","SizeOfNode":2.07},{"name":"Referendums approval threshold","SizeOfNode":2.07},{"name":"Initiatives permitted","SizeOfNode":2.07},{"name":"Referendums permitted","SizeOfNode":2.07},{"name":"Initiatives signature-gathering period","SizeOfNode":2.07},{"name":"Referendums signature-gathering period","SizeOfNode":2.07},{"name":"Initiatives signature-gathering time limit","SizeOfNode":2.07},{"name":"Initiatives signatures %","SizeOfNode":2.07},{"name":"Referendums signatures %","SizeOfNode":2.07},{"name":"Initiatives participation threshold","SizeOfNode":2.07},{"name":"Referendums participation threshold","SizeOfNode":2.07},{"name":"Initiatives super majority","SizeOfNode":2.07},{"name":"Referendums super majority","SizeOfNode":2.07},{"name":"Popular initiative credible threat","SizeOfNode":2.07},{"name":"Occurrence of citizen-initiative this year","SizeOfNode":2.07},{"name":"Obligatory referendum administrative threshold","SizeOfNode":2.07},{"name":"Plebiscite administrative threshold","SizeOfNode":2.07},{"name":"Obligatory referendum approval threshold","SizeOfNode":2.07},{"name":"Plebiscite approval threshold","SizeOfNode":2.07},{"name":"Constitutional changes popular vote","SizeOfNode":2.07},{"name":"Plebiscite permitted","SizeOfNode":2.07},{"name":"Obligatory referendum participation threshold","SizeOfNode":2.07},{"name":"Plebiscite participation threshold","SizeOfNode":2.07},{"name":"Obligatory referendum super majority","SizeOfNode":2.07},{"name":"Plebiscite super majority","SizeOfNode":2.07},{"name":"Obligatory referendum credible threat","SizeOfNode":2.07},{"name":"Plebiscite credible threat","SizeOfNode":2.07},{"name":"Popular referendum credible threat","SizeOfNode":2.07},{"name":"Occurrence of obligatory referendum this year","SizeOfNode":2.07},{"name":"Occurrence of plebiscite this year","SizeOfNode":2.07},{"name":"Occurrence of referendum this year","SizeOfNode":2.07}]},{"name":"Local government index","SizeOfNode":3.59,"children":[{"name":"Local government elected","SizeOfNode":2.07},{"name":"Local government exists","SizeOfNode":2.07},{"name":"Local offices relative power","SizeOfNode":2.07}]},{"name":"Regional government index","SizeOfNode":3.59,"children":[{"name":"Regional government exists","SizeOfNode":2.07},{"name":"Regional offices relative power","SizeOfNode":2.07},{"name":"Regional government elected","SizeOfNode":2.07}]}]},{"name":"Deliberative Democracy Index","SizeOfNode":4.63,"children":[{"name":"Deliberative Democracy Sub Index","SizeOfNode":4.63,"children":[{"name":"Common good","SizeOfNode":2.07},{"name":"Range of consultation","SizeOfNode":2.07},{"name":"Respect counterarguments","SizeOfNode":2.07},{"name":"Engaged society","SizeOfNode":2.07},{"name":"Reasoned justification","SizeOfNode":2.07}]}]},{"name":"Egalitarian Democracy Index","SizeOfNode":7.18,"children":[{"name":"Equal access index","SizeOfNode":3.59,"children":[{"name":"Power distributed by gender","SizeOfNode":2.07},{"name":"Power distributed by socioeconomic position","SizeOfNode":2.07},{"name":"Power distributed by social group","SizeOfNode":2.07}]},{"name":"Equal distribution of resources index","SizeOfNode":4.63,"children":[{"name":"Equal distribution of resources index","SizeOfNode":2.07},{"name":"Particularistic or Public good","SizeOfNode":2.07},{"name":"Means-tested vs. universalistic policy","SizeOfNode":2.07},{"name":"Educational equality","SizeOfNode":2.07},{"name":"Health equality","SizeOfNode":2.07}]},{"name":"Equal protection index","SizeOfNode":4.14,"children":[{"name":"Equal protection index","SizeOfNode":2.07},{"name":"Social class equality in respect for civil liberties","SizeOfNode":2.07},{"name":"Weaker civil liberties population","SizeOfNode":2.07},{"name":"Social group equality in respect for civil liberties","SizeOfNode":2.07}]}]}]},"options":{"hierarchy":["High Level Index","Low Level Index","Indicator"],"input":null,"attribute":"leafCount","linkLength":200,"fontSize":10,"tooltip":false,"collapsed":true,"zoomable":true,"margin":{"top":20,"bottom":20,"left":63.06999999999999,"right":335},"fill":"lightsteelblue"}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Source: <a href="https://v-dem.net/documents/57/structureofaggregation.pdf">(V-Dem Structure of Aggregation)</a></p>
</section>
<section id="missing-value-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="missing-value-analysis"><span class="header-section-number">2.2</span> Missing value analysis</h2>
<p>Eurostat exhibits missing data patterns for the Gini coefficient series, as shown in the analysis below. This led me to drop the UK and adjust my time interval to 2010–2024 (instead of 2004–2024) for the part of this analysis that relates to income inequality.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(eurostat)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>country_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Austria"</span>,<span class="st">"Belgium"</span>,<span class="st">"Bulgaria"</span>,<span class="st">"Croatia"</span>,<span class="st">"Cyprus"</span>,<span class="st">"Czechia"</span>,<span class="st">"Denmark"</span>,<span class="st">"Estonia"</span>,<span class="st">"Finland"</span>, <span class="st">"France"</span>,<span class="st">"Germany"</span>,<span class="st">"Greece"</span>,<span class="st">"Hungary"</span>,<span class="st">"Italy"</span>, <span class="st">"Ireland"</span>, <span class="st">"Latvia"</span>, <span class="st">"Lithuania"</span>,<span class="st">"Luxembourg"</span>,<span class="st">"Malta"</span>,<span class="st">"Netherlands"</span>, <span class="st">"Poland"</span>, <span class="st">"Portugal"</span>, <span class="st">"Romania"</span>,<span class="st">"Slovenia"</span>, <span class="st">"Slovakia"</span>,<span class="st">"Spain"</span>,<span class="st">"Sweden"</span>,<span class="st">"Switzerland"</span>, <span class="st">"United Kingdom"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>geo_codes_e <span class="ot">&lt;-</span> <span class="fu">get_eurostat_dic</span>(<span class="st">"geo"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter eurostat dictionary and get country codes</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>country_codes <span class="ot">&lt;-</span> geo_codes_e <span class="sc">|&gt;</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(full_name <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">nchar</span>(code_name) <span class="sc">==</span> <span class="dv">2</span>)<span class="sc">|&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(code_name)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Create Gini data df</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>gini_missing <span class="ot">&lt;-</span> <span class="fu">get_eurostat</span>(<span class="st">"ilc_di12c"</span>, </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                                <span class="at">time_format =</span> <span class="st">"num"</span>, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">filters =</span> <span class="fu">list</span>(<span class="at">geo =</span> country_codes,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                                <span class="at">time =</span> <span class="dv">2004</span><span class="sc">:</span><span class="dv">2025</span>),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                                <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(geo, time) <span class="sc">|&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(geo) <span class="sc">|&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#fill(values, .direction = "down") |&gt; </span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">#Add country names to Gini data</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>gini_missing_names <span class="ot">&lt;-</span> gini_missing <span class="sc">|&gt;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(geo_codes_e, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"geo"</span> <span class="ot">=</span> <span class="st">"code_name"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">country_name =</span> full_name)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>gini_missing_names <span class="ot">&lt;-</span> gini_missing_names <span class="sc">|&gt;</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(values), <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gini_missing_names, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(country_name, <span class="sc">-</span>missing, sum),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>                        <span class="at">y =</span> <span class="fu">factor</span>(time), </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> values)) <span class="sc">+</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">na.value =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>, </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>, </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gini"</span>,</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Gini Coefficient Data Availability (2004–2024)"</span>,</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Black = missing data"</span>,</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Eurostat"</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./results.html" class="pagination-link" aria-label="Results">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/zeno-r/RZ_Final_Project/edit/main/data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/zeno-r/RZ_Final_Project/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>